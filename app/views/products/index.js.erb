<% if params[:search] %>
  $('#products').html('<%= j render(@products) %>');
<% else %> <%# or opposite [:page] %>
  $('#products').append('<%= j render(@products) %>');
<% end %>

$('.pagination').replaceWith('<%= j paginate(@products) %>');